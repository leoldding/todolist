{"ast":null,"code":"import _regeneratorRuntime from\"/Users/leoding/Desktop/gitRepos/todolist/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/leoding/Desktop/gitRepos/todolist/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/leoding/Desktop/gitRepos/todolist/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/leoding/Desktop/gitRepos/todolist/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/leoding/Desktop/gitRepos/todolist/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/leoding/Desktop/gitRepos/todolist/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import Axios from'axios';import'./login.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.credentialSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();if(!(_this.state.username==='')){_context.next=5;break;}_this.setState({userError:'Username must not be empty!',passError:''});_context.next=34;break;case 5:if(!(_this.state.password==='')){_context.next=9;break;}_this.setState({passError:'Password must not be empty!',userError:''});_context.next=34;break;case 9:if(!(_this.state.login===true)){_context.next=24;break;}_context.prev=10;_context.next=13;return Axios.post('/backend/login',{username:_this.state.username,password:_this.state.password});case 13:_this.props.setState({loggedIn:true,username:_this.state.username});_this.setState({userError:'',passError:''});_context.next=21;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](10);console.log(_context.t0);if(_context.t0.response.status===400){_this.setState({userError:'Invalid User',passError:''});}else if(_context.t0.response.status===401){_this.setState({passError:'Invalid Password',userError:''});}case 21:;_context.next=34;break;case 24:_context.prev=24;_context.next=27;return Axios.post('/backend/signup',{username:_this.state.username,password:_this.state.password});case 27:_this.setState({login:true,username:'',password:'',userError:'',passError:''});_context.next=34;break;case 30:_context.prev=30;_context.t1=_context[\"catch\"](24);console.log(_context.t1);if(_context.t1.response.status===400){_this.setState({userError:'Username Taken',passError:''});}case 34:case\"end\":return _context.stop();}}},_callee,null,[[10,17],[24,30]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.signup=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();_this.setState({login:false,username:'',password:'',userError:'',passError:''});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.signin=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(event){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:event.preventDefault();_this.setState({login:true,username:'',password:'',userError:'',passError:''});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();_this.state={username:'',password:'',userError:'',passError:'',login:true};return _this;}_createClass(Login,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var returnedUser;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return Axios.get('/backend/check').then(function(response){returnedUser=response.data.username;});case 3:this.props.setState({loggedIn:true,username:returnedUser});_context4.next=9;break;case 6:_context4.prev=6;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0);case 9:case\"end\":return _context4.stop();}}},_callee4,this,[[0,6]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;var userErrorMessage=this.state.userError;var passErrorMessage=this.state.passError;if(this.state.login===true){return/*#__PURE__*/_jsxs(\"div\",{className:'form',children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Log In Here\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.credentialSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:'inputContainer',children:[/*#__PURE__*/_jsx(\"input\",{type:'text',placeholder:'Username',value:this.state.username,onChange:function onChange(event){return _this2.setState({username:event.target.value});},autoFocus:true}),/*#__PURE__*/_jsx(\"div\",{className:'errorMessage',children:userErrorMessage})]}),/*#__PURE__*/_jsxs(\"div\",{className:'inputContainer',children:[/*#__PURE__*/_jsx(\"input\",{type:'password',placeholder:'Password',value:this.state.password,onChange:function onChange(event){return _this2.setState({password:event.target.value});}}),/*#__PURE__*/_jsx(\"div\",{className:'errorMessage',children:passErrorMessage})]}),/*#__PURE__*/_jsx(\"button\",{children:\"Login\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"a\",{onClick:this.signup,children:\"Sign Up\"})]})]});}else{return/*#__PURE__*/_jsxs(\"div\",{className:'form',children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sign Up Here\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.credentialSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:'inputContainer',children:[/*#__PURE__*/_jsx(\"input\",{type:'text',placeholder:'Username',value:this.state.username,onChange:function onChange(event){return _this2.setState({username:event.target.value});},autoFocus:true}),/*#__PURE__*/_jsx(\"div\",{className:'errorMessage',children:userErrorMessage})]}),/*#__PURE__*/_jsxs(\"div\",{className:'inputContainer',children:[/*#__PURE__*/_jsx(\"input\",{type:'password',placeholder:'Password',value:this.state.password,onChange:function onChange(event){return _this2.setState({password:event.target.value});}}),/*#__PURE__*/_jsx(\"div\",{className:'errorMessage',children:passErrorMessage})]}),/*#__PURE__*/_jsx(\"button\",{children:\"Sign Up\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Have an account? \",/*#__PURE__*/_jsx(\"a\",{onClick:this.signin,children:\" Log In\"})]})]});}}}]);return Login;}(React.Component);export default Login;","map":{"version":3,"names":["React","Axios","Login","props","credentialSubmit","event","preventDefault","state","username","setState","userError","passError","password","login","post","loggedIn","console","log","response","status","signup","signin","get","then","returnedUser","data","userErrorMessage","passErrorMessage","target","value","Component"],"sources":["/Users/leoding/Desktop/gitRepos/todolist/frontend/src/components/login.js"],"sourcesContent":["import React from 'react';\nimport Axios from 'axios';\nimport './login.css';\n\nclass Login extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            username: '',\n            password: '',\n            userError: '',\n            passError: '',\n            login: true,\n        };\n    }\n\n    async componentDidMount() {\n        let returnedUser\n        try {\n            await Axios.get('/backend/check')\n                .then(function (response) {\n                    returnedUser = response.data.username\n                })\n            this.props.setState({loggedIn:true, username: returnedUser})\n        } catch(err) {\n            console.log(err)\n        }\n    }\n\n    credentialSubmit = async (event) => {\n        event.preventDefault();\n\n        if (this.state.username === '') {\n            this.setState({userError: 'Username must not be empty!', passError: ''})\n        } else if (this.state.password === '') {\n            this.setState({passError: 'Password must not be empty!', userError: ''})\n        } else if (this.state.login === true) {\n            try {\n                await Axios.post('/backend/login', {\n                    username: this.state.username,\n                    password: this.state.password,\n                });\n                this.props.setState({loggedIn: true, username: this.state.username})\n                this.setState({userError: '', passError: ''})\n            } catch (err) {\n                console.log(err)\n                if (err.response.status === 400) {\n                    this.setState({userError: 'Invalid User', passError: ''})\n                } else if (err.response.status === 401) {\n                    this.setState({passError: 'Invalid Password', userError: ''})\n                }\n            };\n        } else {\n            try {\n                await Axios.post('/backend/signup', {\n                    username: this.state.username,\n                    password: this.state.password,\n                });\n                this.setState({login: true, username: '', password: '', userError: '', passError: ''})\n            } catch (err) {\n                console.log(err)\n                if (err.response.status === 400) {\n                    this.setState({userError: 'Username Taken', passError: ''})\n                }\n            }\n        }\n    };\n\n    signup = async (event) => {\n        event.preventDefault();\n        this.setState({login: false, username: '', password: '', userError: '', passError: ''})\n    }\n\n    signin = async (event) => {\n        event.preventDefault();\n        this.setState({login: true, username: '', password: '', userError: '', passError: ''})\n    }\n\n\n    render() {\n        const userErrorMessage = this.state.userError\n        const passErrorMessage = this.state.passError\n        if (this.state.login === true) {\n            return (\n                <div className={'form'}>\n                    <h2>Log In Here</h2>\n                    <form onSubmit={this.credentialSubmit}>\n                        <div className={'inputContainer'}>\n                            <input type={'text'} placeholder={'Username'} value={this.state.username}\n                                   onChange={(event) => this.setState({username: event.target.value})} autoFocus/>\n                            <div className={'errorMessage'}>{userErrorMessage}</div>\n                        </div>\n                        <div className={'inputContainer'}>\n                            <input type={'password'} placeholder={'Password'} value={this.state.password}\n                                   onChange={(event) => this.setState({password: event.target.value})}/>\n                            <div className={'errorMessage'}>{passErrorMessage}</div>\n                        </div>\n                        <button>Login</button>\n                    </form>\n                    <p>Don't have an account? <a onClick={this.signup}>Sign Up</a></p>\n                </div>\n            );\n        } else {\n            return (\n                <div className={'form'}>\n                    <h2>Sign Up Here</h2>\n                    <form onSubmit={this.credentialSubmit}>\n                        <div className={'inputContainer'}>\n                            <input type={'text'} placeholder={'Username'} value={this.state.username}\n                                   onChange={(event) => this.setState({username: event.target.value})} autoFocus/>\n                            <div className={'errorMessage'}>{userErrorMessage}</div>\n                        </div>\n                        <div className={'inputContainer'}>\n                            <input type={'password'} placeholder={'Password'} value={this.state.password}\n                                   onChange={(event) => this.setState({password: event.target.value})}/>\n                            <div className={'errorMessage'}>{passErrorMessage}</div>\n                        </div>\n                        <button>Sign Up</button>\n                    </form>\n                    <p>Have an account? <a onClick={this.signin}> Log In</a></p>\n                </div>\n            );\n        }\n    }\n}\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}